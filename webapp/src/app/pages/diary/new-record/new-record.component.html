<mat-card align="center" style="margin: 20px;" [class.mat-elevation-z5]="true">
	<mat-card-title>
		<h1>New record</h1>
	</mat-card-title>
	<mat-card-subtitle>
		Record how you feel today, or register the emotions of another day
	</mat-card-subtitle>
	<mat-card-content>
		<mat-progress-bar
			*ngIf="percentage || spinnerMode == 'indeterminate'"
			[(mode)]="spinnerMode"
			[value]="percentage"
		></mat-progress-bar>
		<mat-horizontal-stepper [linear]="false" #stepper class="form">
			<form [formGroup]="recordFormGroup">
				<mat-step>
					<ng-template matStepLabel>Choose the Day</ng-template>
					<mat-form-field>
						<mat-label>Choose a date</mat-label>
						<input
							matInput
							formControlName="date"
							[max]="maxDate"
							[matDatepicker]="picker"
						/>
						<mat-error *ngIf="date.invalid && date.touched"
							>You must choose a date</mat-error
						>
						<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
						<mat-datepicker [dateClass]="dateClass" #picker></mat-datepicker>
					</mat-form-field>
					<div>
						<button mat-button matStepperNext>Next</button>
					</div>
				</mat-step>
				<mat-step>
					<ng-template matStepLabel>How you feel</ng-template>
					<mat-form-field>
						<mat-label>I'm feeling...</mat-label>
						<mat-select formControlName="emotion">
							<h3>
								<mat-option *ngFor="let emotion of emotions" [value]="emotion">
									{{ emotion.text | titlecase }} {{ emotion.emoji }}
								</mat-option>
							</h3>
						</mat-select>
						<mat-error *ngIf="emotion.invalid && emotion.touched"
							>You must select the emotion</mat-error
						>
					</mat-form-field>
					<div>
						<button mat-button matStepperPrevious>Back</button>
						<button mat-button matStepperNext>Next</button>
					</div>
				</mat-step>
				<mat-step>
					<ng-template matStepLabel>Add some notes</ng-template>
					<p>Tell me more about it</p>
					<mat-form-field class="full-width">
						<mat-label>‚úçÔ∏è Write down your thoughts </mat-label>
						<textarea
							matInput
							placeholder="Ex. Dear diary, today..."
							formControlName="notes"
						></textarea>
					</mat-form-field>
					<div>
						<button mat-button matStepperPrevious>Back</button>
						<button mat-button matStepperNext>Next</button>
					</div>
				</mat-step>
				<mat-step>
					<ng-template matStepLabel>Overview</ng-template>

					<mat-form-field class="full-width">
						<mat-label>üìÖ Day</mat-label>
						<input
							matInput
							value="{{ recordFormGroup.value?.date?.toLocaleDateString() }}"
							disabled
						/>
						<mat-datepicker #overviewDate></mat-datepicker>
					</mat-form-field>
					<mat-form-field class="full-width">
						<mat-label>‚ù§Ô∏è You felted</mat-label>
						<input
							matInput
							[value]="
								recordFormGroup.value?.emotion
									? (recordFormGroup.value?.emotion.text | titlecase) +
									  recordFormGroup.value?.emotion.emoji
									: ''
							"
							disabled
						/>
					</mat-form-field>
					<mat-form-field class="full-width">
						<mat-label>‚úçÔ∏è Extra notes </mat-label>
						<textarea
							matInput
							disabled
							value="{{ recordFormGroup.value?.notes }}"
						></textarea>
					</mat-form-field>
					<div>
						<button
							mat-raised-button
							color="warn"
							(click)="recordFormGroup.reset(); stepper.reset()"
						>
							Cancel
						</button>
						<button mat-button matStepperPrevious>Back</button>
						<button mat-raised-button color="accent" (click)="newRecord()">
							Save
						</button>
					</div>
				</mat-step>
			</form>
		</mat-horizontal-stepper>
	</mat-card-content>
</mat-card>
